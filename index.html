<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>818 æŠ½çæ´»å‹•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: white;
            font-size: 2.5rem;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .sections {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 900px) {
            .sections {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .card h2 {
            color: #4a5568;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card h2 .emoji {
            font-size: 1.5rem;
        }

        /* æŠ½çå€åŸŸ */
        .lottery-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .current-draw {
            background: linear-gradient(135deg, #f6f8fb 0%, #e9ecef 100%);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .current-draw .label {
            color: #718096;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .current-draw .value {
            font-size: 2rem;
            font-weight: bold;
            color: #2d3748;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .current-draw .value.highlight {
            color: #e53e3e;
            animation: pulse 0.5s ease;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }
        }

        .btn {
            padding: 14px 28px;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #38b2ac 0%, #319795 100%);
            color: white;
        }

        .btn-secondary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(56, 178, 172, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
            color: white;
        }

        .btn-warning:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(237, 137, 54, 0.4);
        }

        .btn-danger {
            background: #e53e3e;
            color: white;
            padding: 10px 20px;
            font-size: 0.9rem;
        }

        .btn-danger:hover:not(:disabled) {
            background: #c53030;
        }

        /* ç‹€æ…‹é¡¯ç¤º */
        .status {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .status-item {
            background: #edf2f7;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            color: #4a5568;
        }

        .status-item.active {
            background: #c6f6d5;
            color: #276749;
        }

        .status-item.done {
            background: #fed7d7;
            color: #c53030;
        }

        /* çµæœåˆ—è¡¨ */
        .results-section {
            margin-top: 20px;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        .results-table th,
        .results-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #e2e8f0;
        }

        .results-table th {
            background: #f7fafc;
            color: #4a5568;
            font-weight: 600;
        }

        .results-table tr:hover {
            background: #f7fafc;
        }

        .results-table .money {
            color: #e53e3e;
            font-weight: bold;
        }

        /* å‰©é¤˜æ±  */
        .pool-section {
            margin-top: 20px;
        }

        .pool-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .pool-title {
            font-size: 0.9rem;
            color: #718096;
        }

        .btn-small {
            background: #a0aec0;
            color: white;
            border: none;
            padding: 4px 10px;
            font-size: 0.75rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-small:hover {
            background: #718096;
        }

        .pool-items {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .pool-item {
            background: #edf2f7;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            color: #4a5568;
        }

        .pool-item.used {
            background: #fed7d7;
            color: #c53030;
            text-decoration: line-through;
        }

        /* ä¸»æŠ½çæµç¨‹æŒ‡ç¤º */
        .step-indicator {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .step {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            background: #e2e8f0;
            color: #718096;
        }

        .step.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .step.done {
            background: #c6f6d5;
            color: #276749;
        }

        /* åŠ ç¢¼å€ç¨ç«‹çµæœ */
        .bonus-results {
            margin-top: 15px;
        }

        .bonus-result-item {
            padding: 10px;
            background: #f0fff4;
            border-radius: 8px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .bonus-result-item .order {
            background: #38a169;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: bold;
        }

        .bonus-result-item .name {
            font-weight: bold;
            color: #276749;
            flex: 1;
            margin-left: 12px;
        }

        .empty-state {
            text-align: center;
            color: #a0aec0;
            padding: 30px;
            font-style: italic;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .full-width {
            grid-column: 1 / -1;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸ‰ 818 æŠ½çæ´»å‹• ğŸ‰</h1>

        <div class="sections">
            <!-- ä¸»æŠ½çå€ -->
            <div class="card">
                <h2><span class="emoji">ğŸ°</span> ä¸»æŠ½ç</h2>

                <div class="step-indicator">
                    <span class="step" id="step1">1. æŠ½äººå</span>
                    <span class="step" id="step2">2. æŠ½çå“</span>
                    <span class="step" id="step3">3. æŠ½çé‡‘</span>
                </div>

                <div class="lottery-section">
                    <div class="current-draw">
                        <div class="label">ç›®å‰æŠ½å‡º</div>
                        <div class="value" id="mainResult">ç­‰å¾…æŠ½ç...</div>
                    </div>

                    <button class="btn btn-primary" id="mainDrawBtn" onclick="mainDraw()">
                        ğŸ² é–‹å§‹æŠ½ç
                    </button>

                    <div class="status">
                        <span class="status-item" id="statusPeople">å‰©é¤˜äººæ•¸: 9</span>
                        <span class="status-item" id="statusPrize">å‰©é¤˜çå“: 9</span>
                        <span class="status-item" id="statusMoney">å‰©é¤˜çé‡‘: 9</span>
                    </div>
                </div>

                <div class="controls">
                    <button class="btn btn-danger" onclick="resetMain()">ğŸ”„ é‡ç½®ä¸»æŠ½ç</button>
                </div>
            </div>

            <!-- åŠ ç¢¼æŠ½çå€ -->
            <div class="card">
                <h2><span class="emoji">ğŸŒŸ</span> åŠ ç¢¼æ´»å‹•ï¼ˆæŠ½äººåï¼‰</h2>

                <div class="lottery-section">
                    <div class="current-draw">
                        <div class="label">æŠ½å‡ºäººå“¡</div>
                        <div class="value" id="bonusResult">ç­‰å¾…æŠ½ç...</div>
                    </div>

                    <button class="btn btn-secondary" id="bonusDrawBtn" onclick="bonusDraw()">
                        â­ æŠ½ä¸€ä½å¹¸é‹å…’
                    </button>

                    <div class="status">
                        <span class="status-item" id="bonusStatus">å‰©é¤˜äººæ•¸: 9</span>
                    </div>
                </div>

                <div class="bonus-results" id="bonusResultsList">
                    <div class="empty-state">å°šç„¡æŠ½ççµæœ</div>
                </div>

                <div class="controls">
                    <button class="btn btn-danger" onclick="resetBonus()">ğŸ”„ é‡ç½®åŠ ç¢¼æŠ½ç</button>
                </div>
            </div>

            <!-- ä¸»æŠ½ççµæœ -->
            <div class="card full-width">
                <h2 style="justify-content: space-between;">
                    <span><span class="emoji">ğŸ“‹</span> ä¸»æŠ½ççµæœç´€éŒ„</span>
                    <button class="btn btn-danger" onclick="resetMain()"
                        style="font-size: 0.8rem; padding: 8px 16px;">ğŸ”„ é‡ç½®å…¨éƒ¨</button>
                </h2>

                <div id="mainResultsArea">
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th>é †åº</th>
                                <th>å§“å</th>
                                <th>çå“</th>
                                <th>çé‡‘</th>
                            </tr>
                        </thead>
                        <tbody id="mainResultsBody">
                            <tr>
                                <td colspan="4" class="empty-state">å°šç„¡æŠ½ççµæœ</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="pool-section">
                    <div class="pool-header">
                        <div class="pool-title">ğŸ‘¥ äººåæ± </div>
                        <button class="btn-small" onclick="resetPeoplePool()">é‡ç½®</button>
                    </div>
                    <div class="pool-items" id="peoplePool"></div>
                </div>
                <div class="pool-section">
                    <div class="pool-header">
                        <div class="pool-title">ğŸ çå“æ± </div>
                        <button class="btn-small" onclick="resetPrizePool()">é‡ç½®</button>
                    </div>
                    <div class="pool-items" id="prizePool"></div>
                </div>
                <div class="pool-section">
                    <div class="pool-header">
                        <div class="pool-title">ğŸ’° çé‡‘æ± </div>
                        <button class="btn-small" onclick="resetMoneyPool()">é‡ç½®</button>
                    </div>
                    <div class="pool-items" id="moneyPool"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== åˆå§‹è³‡æ–™ =====
        const INITIAL_PEOPLE = ['æ·‘é›…', 'éº—è', 'å°é€¸', 'ä½³æ˜Œ', 'é¦¬è¦', 'å°é«˜', 'ç¿ç¿', 'ä¸»å»š', 'åº—é•·'];
        const INITIAL_PRIZES = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I'];
        const INITIAL_MONEY = [5000, 3000, 2000, 1000, 1000, 1000, 1000, 1000, 1000];

        // ===== ä¸»æŠ½çç‹€æ…‹ =====
        let mainPeople = [...INITIAL_PEOPLE];
        let mainPrizes = [...INITIAL_PRIZES];
        let mainMoney = [...INITIAL_MONEY];
        let mainResults = [];
        let mainStep = 1; // 1: æŠ½äºº, 2: æŠ½çå“, 3: æŠ½çé‡‘
        let currentPerson = null;
        let currentPrize = null;

        // ===== åŠ ç¢¼æŠ½çç‹€æ…‹ =====
        const BONUS_INITIAL_PEOPLE = ['æ·‘é›…', 'éº—è', 'å°é€¸', 'é¦¬è¦', 'å°é«˜', 'ç¿ç¿'];
        let bonusPeople = [...BONUS_INITIAL_PEOPLE];
        let bonusResults = [];

        // ===== åˆå§‹åŒ– =====
        function init() {
            updatePools();
            updateStatus();
            updateStepIndicator();
        }

        // ===== ä¸»æŠ½çé‚è¼¯ =====
        function mainDraw() {
            const resultEl = document.getElementById('mainResult');
            const btnEl = document.getElementById('mainDrawBtn');

            if (mainStep === 1) {
                // æŠ½äººå
                if (mainPeople.length === 0) {
                    alert('æ‰€æœ‰äººéƒ½å·²æŠ½å®Œï¼');
                    return;
                }
                const idx = Math.floor(Math.random() * mainPeople.length);
                currentPerson = mainPeople.splice(idx, 1)[0];
                resultEl.textContent = `ğŸ‘¤ ${currentPerson}`;
                resultEl.classList.add('highlight');
                setTimeout(() => resultEl.classList.remove('highlight'), 500);

                mainStep = 2;
                btnEl.textContent = 'ğŸ æŠ½çå“';

            } else if (mainStep === 2) {
                // æŠ½çå“
                const idx = Math.floor(Math.random() * mainPrizes.length);
                currentPrize = mainPrizes.splice(idx, 1)[0];
                resultEl.textContent = `ğŸ‘¤ ${currentPerson} â†’ ğŸ çå“ ${currentPrize}`;
                resultEl.classList.add('highlight');
                setTimeout(() => resultEl.classList.remove('highlight'), 500);

                mainStep = 3;
                btnEl.textContent = 'ğŸ’° æŠ½çé‡‘';

            } else if (mainStep === 3) {
                // æŠ½çé‡‘
                const idx = Math.floor(Math.random() * mainMoney.length);
                const money = mainMoney.splice(idx, 1)[0];
                resultEl.textContent = `ğŸ‘¤ ${currentPerson} â†’ ğŸ ${currentPrize} â†’ ğŸ’° $${money.toLocaleString()}`;
                resultEl.classList.add('highlight');
                setTimeout(() => resultEl.classList.remove('highlight'), 500);

                // è¨˜éŒ„çµæœ
                mainResults.push({
                    person: currentPerson,
                    prize: currentPrize,
                    money: money
                });

                // é‡ç½®æ­¥é©Ÿ
                mainStep = 1;
                currentPerson = null;
                currentPrize = null;

                if (mainPeople.length > 0) {
                    btnEl.textContent = 'ğŸ² ç¹¼çºŒæŠ½ç';
                } else {
                    btnEl.textContent = 'âœ… æŠ½çå®Œæˆ';
                    btnEl.disabled = true;
                }

                updateMainResults();
            }

            updatePools();
            updateStatus();
            updateStepIndicator();
        }

        // ===== åŠ ç¢¼æŠ½çé‚è¼¯ =====
        function bonusDraw() {
            if (bonusPeople.length === 0) {
                alert('åŠ ç¢¼æŠ½ççš„äººå“¡å·²å…¨éƒ¨æŠ½å®Œï¼');
                return;
            }

            const resultEl = document.getElementById('bonusResult');
            const btnEl = document.getElementById('bonusDrawBtn');

            const idx = Math.floor(Math.random() * bonusPeople.length);
            const person = bonusPeople.splice(idx, 1)[0];

            resultEl.textContent = `â­ ${person}`;
            resultEl.classList.add('highlight');
            setTimeout(() => resultEl.classList.remove('highlight'), 500);

            bonusResults.push(person);
            updateBonusResults();
            updateBonusStatus();

            if (bonusPeople.length === 0) {
                btnEl.textContent = 'âœ… æŠ½çå®Œæˆ';
                btnEl.disabled = true;
            }
        }

        // ===== æ›´æ–°é¡¯ç¤º =====
        function updatePools() {
            // äººåæ± 
            const peoplePoolEl = document.getElementById('peoplePool');
            peoplePoolEl.innerHTML = INITIAL_PEOPLE.map(p => {
                const used = !mainPeople.includes(p);
                return `<span class="pool-item ${used ? 'used' : ''}">${p}</span>`;
            }).join('');

            // çå“æ± 
            const prizePoolEl = document.getElementById('prizePool');
            prizePoolEl.innerHTML = INITIAL_PRIZES.map(p => {
                const used = !mainPrizes.includes(p);
                return `<span class="pool-item ${used ? 'used' : ''}">${p}</span>`;
            }).join('');

            // çé‡‘æ± 
            const moneyPoolEl = document.getElementById('moneyPool');
            const usedMoney = [...INITIAL_MONEY];
            mainMoney.forEach(m => {
                const idx = usedMoney.indexOf(m);
                if (idx > -1) usedMoney[idx] = null;
            });
            moneyPoolEl.innerHTML = INITIAL_MONEY.map((m, i) => {
                const used = usedMoney[i] !== null;
                return `<span class="pool-item ${used ? 'used' : ''}">$${m.toLocaleString()}</span>`;
            }).join('');
        }

        function updateStatus() {
            document.getElementById('statusPeople').textContent = `å‰©é¤˜äººæ•¸: ${mainPeople.length}`;
            document.getElementById('statusPrize').textContent = `å‰©é¤˜çå“: ${mainPrizes.length}`;
            document.getElementById('statusMoney').textContent = `å‰©é¤˜çé‡‘: ${mainMoney.length}`;
        }

        function updateBonusStatus() {
            document.getElementById('bonusStatus').textContent = `å‰©é¤˜äººæ•¸: ${bonusPeople.length}`;
        }

        function updateStepIndicator() {
            const steps = ['step1', 'step2', 'step3'];
            steps.forEach((id, i) => {
                const el = document.getElementById(id);
                el.className = 'step';
                if (i + 1 < mainStep) {
                    el.classList.add('done');
                } else if (i + 1 === mainStep) {
                    el.classList.add('active');
                }
            });
        }

        function updateMainResults() {
            const tbody = document.getElementById('mainResultsBody');
            if (mainResults.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4" class="empty-state">å°šç„¡æŠ½ççµæœ</td></tr>';
                return;
            }
            tbody.innerHTML = mainResults.map((r, i) => `
                <tr>
                    <td>${i + 1}</td>
                    <td>${r.person}</td>
                    <td>çå“ ${r.prize}</td>
                    <td class="money">$${r.money.toLocaleString()}</td>
                </tr>
            `).join('');
        }

        function updateBonusResults() {
            const container = document.getElementById('bonusResultsList');
            if (bonusResults.length === 0) {
                container.innerHTML = '<div class="empty-state">å°šç„¡æŠ½ççµæœ</div>';
                return;
            }
            container.innerHTML = bonusResults.map((name, i) => `
                <div class="bonus-result-item">
                    <span class="order">${i + 1}</span>
                    <span class="name">${name}</span>
                </div>
            `).join('');
        }

        // ===== é‡ç½®åŠŸèƒ½ =====
        function resetMain() {
            if (!confirm('ç¢ºå®šè¦é‡ç½®ä¸»æŠ½çå—ï¼Ÿæ‰€æœ‰ç´€éŒ„å°‡è¢«æ¸…é™¤ï¼')) return;

            mainPeople = [...INITIAL_PEOPLE];
            mainPrizes = [...INITIAL_PRIZES];
            mainMoney = [...INITIAL_MONEY];
            mainResults = [];
            mainStep = 1;
            currentPerson = null;
            currentPrize = null;

            document.getElementById('mainResult').textContent = 'ç­‰å¾…æŠ½ç...';
            document.getElementById('mainDrawBtn').textContent = 'ğŸ² é–‹å§‹æŠ½ç';
            document.getElementById('mainDrawBtn').disabled = false;

            updatePools();
            updateStatus();
            updateStepIndicator();
            updateMainResults();
        }

        function resetBonus() {
            if (!confirm('ç¢ºå®šè¦é‡ç½®åŠ ç¢¼æŠ½çå—ï¼Ÿæ‰€æœ‰ç´€éŒ„å°‡è¢«æ¸…é™¤ï¼')) return;

            bonusPeople = [...BONUS_INITIAL_PEOPLE];
            bonusResults = [];

            document.getElementById('bonusResult').textContent = 'ç­‰å¾…æŠ½ç...';
            document.getElementById('bonusDrawBtn').textContent = 'â­ æŠ½ä¸€ä½å¹¸é‹å…’';
            document.getElementById('bonusDrawBtn').disabled = false;

            updateBonusStatus();
            updateBonusResults();
        }

        // ===== å€‹åˆ¥æ± å­é‡ç½® =====
        function resetPeoplePool() {
            if (!confirm('ç¢ºå®šè¦é‡ç½®äººåæ± å—ï¼Ÿ')) return;
            mainPeople = [...INITIAL_PEOPLE];
            mainStep = 1;
            currentPerson = null;
            currentPrize = null;
            document.getElementById('mainResult').textContent = 'ç­‰å¾…æŠ½ç...';
            document.getElementById('mainDrawBtn').textContent = 'ğŸ² é–‹å§‹æŠ½ç';
            document.getElementById('mainDrawBtn').disabled = false;
            updatePools();
            updateStatus();
            updateStepIndicator();
        }

        function resetPrizePool() {
            if (!confirm('ç¢ºå®šè¦é‡ç½®çå“æ± å—ï¼Ÿ')) return;
            mainPrizes = [...INITIAL_PRIZES];
            updatePools();
            updateStatus();
        }

        function resetMoneyPool() {
            if (!confirm('ç¢ºå®šè¦é‡ç½®çé‡‘æ± å—ï¼Ÿ')) return;
            mainMoney = [...INITIAL_MONEY];
            updatePools();
            updateStatus();
        }

        // å•Ÿå‹•
        init();
    </script>
</body>

</html>